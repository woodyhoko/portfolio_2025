<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI/ML Engineer Portfolio</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      /* Updated color variables for more subtle look */
      :root {
        --scrollbar-thumb: rgba(255, 255, 255, 0.2);
        --scrollbar-track: rgba(0, 0, 0, 0);
        --headline-color-start: rgba(0, 255, 136, 0.8);
        --headline-color-end: rgba(0, 161, 255, 0.8);
      }

      /* Modern scrollbar styling with @supports fallback */
      @supports not selector(::-webkit-scrollbar) {
        * {
          scrollbar-width: thin;
          scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
        }
      }

      /* Webkit scrollbar styling */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }

      ::-webkit-scrollbar-track {
        background: var(--scrollbar-track);
      }

      ::-webkit-scrollbar-thumb {
        background: var(--scrollbar-thumb);
        border-radius: 10px;
        transition: background 0.3s ease;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      /* Hide scrollbar arrows */
      ::-webkit-scrollbar-button {
        display: none;
      }

      /* Updated subtle gradient for headlines */
      h2 {
        background: linear-gradient(
          45deg,
          var(--headline-color-start),
          var(--headline-color-end)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        opacity: 0.9;
      }

      /* Modal scrollbar specific styling */
      .modal-content {
        scrollbar-width: thin;
        scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
      }

      .modal-content::-webkit-scrollbar {
        width: 4px;
      }

      .modal-content::-webkit-scrollbar-thumb {
        background: var(--scrollbar-thumb);
        border-radius: 10px;
      }

      body {
        background: #0a0a0a;
        color: #fff;
        overflow-x: hidden;
      }

      #canvas-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        z-index: -1;
      }

      .hero {
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        position: relative;
      }

      .hero-content {
        z-index: 1;
      }

      .nav-logo {
        font-size: 4rem;
        margin-bottom: 1rem;
        background: linear-gradient(45deg, #00ff88, #00a1ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        opacity: 0;
        animation: fadeIn1 1s ease-out forwards;
      }

      .hero p {
        font-size: 1.5rem;
        color: #888;
        opacity: 0;
        animation: fadeIn1 1s ease-out 0.5s forwards;
      }

      .scroll-indicator {
        position: absolute;
        bottom: 2rem;
        cursor: pointer;
        background: linear-gradient(45deg, #00ff88, #00a1ff);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        transition: box-shadow 0.3s ease;
      }

      .scroll-indicator.bouncing {
        animation: bounce 2s cubic-bezier(0.28, 0, 0.72, 1);
      }

      .scroll-indicator svg {
        width: 24px;
        height: 24px;
        fill: none;
        stroke: white;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .section {
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.6s ease-out;
      }

      .section.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .section h2 {
        font-size: 2.5rem;
        margin-bottom: 2rem;
        color: #00ff88;
      }

      .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
      }

      .highlight {
        background-color: rgba(0, 255, 136, 0.2);
        border-radius: 3px;
        padding: 0 3px;
        transition: background-color 0.3s ease;
      }

      .project-card {
        background: rgba(255, 255, 255, 0.05);
        padding: 1.5rem;
        padding-bottom: 0.5rem;
        cursor: pointer;
        /* transition: all 0.3s ease, border 0.3s ease, transform 0.3s ease; */
        transition: all 0.3s ease;
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
        /* Unique border radius for each corner */
        border-radius: 30px 5px 25px 5px;
        /* Glass effect */
        backdrop-filter: blur(7px);
        /* Gradient border */
        /* background: linear-gradient(
          rgba(255, 255, 255, 0.05),
          rgba(255, 255, 255, 0.03)
        ); */
      }

      .project-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: inherit;
        padding: 2px;
        background: linear-gradient(
          135deg,
          rgba(0, 255, 136, 0.2),
          rgba(0, 161, 255, 0.2)
        );
        -webkit-mask: linear-gradient(#fff 0 0) content-box,
          linear-gradient(#fff 0 0);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        pointer-events: none;
      }

      .project-card.highlight-card {
        border: none;
        /* Enhanced glow effect for highlighted cards */
        box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
      }

      .project-card.highlight-card::before {
        background: linear-gradient(
          135deg,
          rgba(0, 255, 136, 0.4),
          rgba(0, 161, 255, 0.4)
        );
      }

      .project-card:hover {
        transform: translateY(-5px);
        background: rgba(255, 255, 255, 0.1);
      }

      /* Add subtle animation for card content */
      .project-card h3 {
        color: #00a1ff;
        margin-bottom: 1rem;
        position: relative;
        z-index: 1;
      }

      .project-card p {
        position: relative;
        z-index: 1;
      }

      .skill-tags {
        position: relative;
        z-index: 1;
      }

      .highlight {
        background: linear-gradient(
          120deg,
          rgba(0, 255, 136, 0.2),
          rgba(0, 161, 255, 0.2)
        );
        border-radius: 3px;
        padding: 0 3px;
        transition: background-color 0.3s ease;
      }

      .experience-item {
        margin-bottom: 2rem;
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        backdrop-filter: blur(7px);
      }

      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .modal-content {
        background: #1a1a1a;
        padding: 2rem;
        border-radius: 15px;
        max-width: 800px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
      }

      .close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        color: #fff;
        cursor: pointer;
        font-size: 1.5rem;
      }

      @keyframes fadeIn1 {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-20px);
        }
        60% {
          transform: translateY(-10px);
        }
      }

      .skill-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 1rem;
        margin-bottom: 1rem;
      }

      .skill-tag {
        background: rgba(0, 161, 255, 0.2);
        color: #00a1ff;
        padding: 0.25rem 0.75rem;
        border-radius: 15px;
        font-size: 0.9rem;
      }

      .nav-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: rgba(10, 10, 10, 0.75);
        z-index: 100;
        backdrop-filter: blur(3px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }

      .nav-logo {
        position: fixed;
        font-size: 5rem;
        background: linear-gradient(45deg, #00ff88, #00a1ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        z-index: 1000;
        transform-origin: center;
        /* transition: opacity 0.3s ease; */
        /* Remove individual position transitions, handle everything through transform */
        /* transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); */
      }

      .nav-logo.center,
      .nav-logo.top,
      .nav-logo.corner {
        position: fixed;
        left: 0;
        top: 0;
      }

      .navbar {
        display: flex;
        justify-content: flex-end; /* Change to flex-end to keep nav links on right */
        align-items: center;
        padding: 1rem 2rem;
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
      }

      /* .nav-logo {
        font-size: 1.5rem;
        font-weight: bold;
        background: linear-gradient(45deg, #00ff88, #00a1ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        z-index: 2;
      } */

      .menu-toggle {
        display: none;
        cursor: pointer;
        z-index: 2;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 0; /* Remove padding */
        transition: all 0.3s ease;
        position: relative; /* Add position relative */
      }

      .menu-toggle:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .menu-toggle span {
        display: block;
        width: 20px; /* Slightly reduced width */
        height: 2px;
        background: #00ff88;
        position: absolute; /* Position absolutely */
        left: 50%; /* Center horizontally */
        transform: translateX(-50%); /* Center horizontally */
        transition: all 0.4s ease;
        border-radius: 2px;
      }

      .menu-toggle span:nth-child(1) {
        top: 13px;
      }

      .menu-toggle span:nth-child(2) {
        top: 19px;
      }

      .menu-toggle span:nth-child(3) {
        top: 25px;
      }

      @media screen and (max-width: 768px) {
        .menu-toggle {
          display: block; /* Changed from flex to block */
        }

        .nav-links {
          position: fixed;
          top: 0;
          right: -100%;
          width: 100%;
          height: 100vh;
          background: rgba(10, 10, 10, 0.85);
          flex-direction: column;
          justify-content: center;
          align-items: center;
          transition: all 0.5s cubic-bezier(0.77, 0, 0.175, 1);
          backdrop-filter: blur(20px);
          z-index: 1;
        }

        .nav-links.active {
          right: 0;
        }

        .nav-links a {
          margin: 1.5rem 0;
          font-size: 1.4rem;
          opacity: 0;
          transform: translateY(20px);
          /* transition: all 0.5s cubic-bezier(0.77, 0, 0.175, 1); */
          position: relative;
          padding: 0.5rem 1.5rem;
          border-radius: 30px;
        }

        .nav-links.active a {
          opacity: 1;
          transform: translateY(0);
        }

        .nav-links a:hover {
          background: rgba(0, 255, 136, 0.1);
        }

        .nav-links a::after {
          content: "";
          position: absolute;
          bottom: 0;
          left: 50%;
          width: 0;
          height: 2px;
          background: #00ff88;
          transition: all 0.3s ease;
          transform: translateX(-50%);
        }

        .nav-links a:hover::after {
          width: 80%;
        }

        .menu-toggle.active span:nth-child(1) {
          top: 19px; /* Center point */
          transform: translateX(-50%) rotate(45deg);
        }

        .menu-toggle.active span:nth-child(2) {
          opacity: 0;
        }

        .menu-toggle.active span:nth-child(3) {
          top: 19px; /* Center point */
          transform: translateX(-50%) rotate(-45deg);
        }

        /* .nav-logo.corner {
          left: 80px;
        } */
        .nav-logo {
          font-size: 3rem;
        }
      }

      .nav-links {
        display: flex;
        gap: 2rem;
      }

      .nav-links a {
        color: #fff;
        text-decoration: none;
        transition: color 0.3s ease;
        cursor: pointer;
      }

      .nav-links a:hover {
        color: #00ff88;
      }

      /* Add padding to hero section to account for fixed navbar */
      .hero {
        padding-top: 80px;
      }

      /* Project filtering styles */
      .projects-filter {
        margin-bottom: 2rem;
      }

      .filter-container {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .filter-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .filter-group label {
        color: #888;
        font-size: 0.9rem;
      }

      .filter-select {
        padding: 0.5rem 1rem;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #fff;
        cursor: pointer;
      }

      .filter-select option {
        background: #1a1a1a;
      }

      .search-bar {
        width: 100%;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #fff;
        margin-bottom: 1rem;
        backdrop-filter: blur(7px);
      }

      .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
        transition: all 0.3s ease;
      }

      .project-card.hidden {
        display: none;
      }

      /* Add new styles for the typing animation */
      .typing-text {
        font-size: 1.5rem;
        color: #888;
        min-height: 2em;
        position: relative;
        opacity: 1 !important;
      }

      .typing-text span {
        display: inline-block;
        position: relative;
        font-family: monospace;
        /* color: #00ff88; */
        text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
      }

      .typing-text span.shuffling {
        color: rgba(0, 255, 136, 0.3);
        text-shadow: 0 0 5px rgba(0, 255, 136, 0.2);
        transition: all 0.3s ease;
      }

      .typing-text span.static {
        color: #00ff88;
        text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        transition: all 0.3s ease;
      }

      .typing-text span.ghost {
        color: rgba(0, 255, 136, 0.3);
      }

      @keyframes glitch {
        0% {
          text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }
        50% {
          text-shadow: 0 0 20px rgba(0, 161, 255, 0.8);
        }
        100% {
          text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }
      }

      .chat-container {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 1.5rem;
        margin-top: 1rem;
        backdrop-filter: blur(7px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .chat-header {
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .model-select {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #fff;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        cursor: pointer;
      }

      .model-select:focus {
        outline: none;
        border-color: rgba(0, 255, 136, 0.3);
      }

      .chat-messages {
        height: 400px;
        overflow-y: auto;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .chat-message {
        padding: 1rem;
        border-radius: 10px;
        max-width: 80%;
        animation: fadeIn 0.3s ease-out;
        white-space: pre-wrap;
      }

      .chat-message.user {
        background: rgba(0, 255, 136, 0.1);
        align-self: flex-end;
        border: 1px solid rgba(0, 255, 136, 0.2);
      }

      .chat-message.assistant {
        background: rgba(0, 161, 255, 0.1);
        align-self: flex-start;
        border: 1px solid rgba(0, 161, 255, 0.2);
      }

      /* New styles for the thinking process display */
      .thinking-process {
        background: rgba(128, 128, 128, 0.1);
        align-self: flex-start;
        border: 1px solid rgba(128, 128, 128, 0.2);
        width: 100%;
        max-width: 100%;
      }

      .thinking-process strong {
        color: #aaa;
        font-size: 0.9em;
      }

      .thinking-process pre {
        background-color: rgba(0, 0, 0, 0.2);
        padding: 0.5rem;
        border-radius: 5px;
        margin-top: 0.5rem;
        font-size: 0.8em;
        color: #ccc;
        white-space: pre-wrap;
        word-wrap: break-word;
      }

      .chat-input-container {
        display: flex;
        gap: 1rem;
        align-items: flex-end;
      }

      .chat-input {
        flex: 1;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        padding: 1rem;
        color: #fff;
        resize: none;
        min-height: 20px;
        max-height: 150px;
        transition: all 0.3s ease;
      }

      .chat-input:focus {
        outline: none;
        border-color: rgba(0, 255, 136, 0.3);
        background: rgba(255, 255, 255, 0.08);
      }

      .chat-send-button {
        background: linear-gradient(45deg, #00ff88, #00a1ff);
        border: none;
        border-radius: 50%;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .chat-send-button:hover {
        transform: scale(1.05);
        box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
      }

      .chat-send-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .chat-send-button svg {
        width: 24px;
        height: 24px;
        stroke: #fff;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .typing-indicator {
        display: inline-flex;
        gap: 0.2rem;
        margin-left: 0.3rem;
        vertical-align: middle;
      }

      .typing-indicator span {
        width: 3px;
        height: 3px;
        background: rgba(0, 161, 255, 0.6);
        border-radius: 50%;
        animation: typing 0.8s infinite;
        display: inline-block;
      }

      .typing-indicator span:nth-child(2) {
        animation-delay: 0.15s;
      }

      .typing-indicator span:nth-child(3) {
        animation-delay: 0.3s;
      }

      @keyframes typing {
        0%,
        100% {
          transform: translateY(0);
          opacity: 0.5;
        }
        50% {
          transform: translateY(-2px);
          opacity: 1;
        }
      }

      .experience-container {
        position: relative;
      }

      .experience-item {
        margin-bottom: 2rem;
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        backdrop-filter: blur(7px);
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .experience-item.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .experience-item.hidden {
        display: none;
      }

      .show-more-btn {
        display: inline-block;
        /* margin-top: 2rem; */
        padding: 0.75rem 2rem;
        background: linear-gradient(
          135deg,
          rgba(0, 255, 136, 0.1),
          rgba(0, 161, 255, 0.1)
        );
        border: 1px solid rgba(0, 255, 136, 0.2);
        border-radius: 25px;
        color: #fff;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(7px);
        position: relative;
        overflow: hidden;
      }

      .show-more-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(0, 255, 136, 0.2),
          rgba(0, 161, 255, 0.2)
        );
        transition: transform 0.5s ease;
        z-index: 1;
      }

      .show-more-btn:hover::before {
        transform: translateX(100%);
      }

      .show-more-btn span {
        position: relative;
        z-index: 2;
      }

      .show-more-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 255, 136, 0.2);
      }

      .experience-divider {
        width: 100%;
        height: 1px;
        background: linear-gradient(
          to right,
          rgba(0, 255, 136, 0),
          rgba(0, 255, 136, 0.2),
          rgba(0, 161, 255, 0.2),
          rgba(0, 161, 255, 0)
        );
        /* margin: 2rem 0; */
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .experience-divider.visible {
        opacity: 1;
        margin: 2rem 0;
      }
    </style>
  </head>
  <body>
    <div class="nav-container">
      <nav class="navbar">
        <div class="menu-toggle" onclick="toggleMenu()">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="nav-links">
          <a onclick="smoothScroll('about')">About</a>
          <a onclick="smoothScroll('chat')">Chat</a>
          <a onclick="smoothScroll('experience')">Experience</a>
          <a onclick="smoothScroll('education')">Education</a>
          <a onclick="smoothScroll('projects')">Projects</a>
        </div>
      </nav>
    </div>

    <div class="nav-logo center">Ho Ko</div>

    <div id="canvas-container"></div>

    <section class="hero">
      <div class="hero-content">
        <div class="typing-text" id="typing-text"></div>
      </div>
      <div class="scroll-indicator" onclick="smoothScroll('about')">
        <svg viewBox="0 0 24 24">
          <path d="M7 10l5 5 5-5"></path>
        </svg>
      </div>
    </section>
    <section id="about" class="section">
      <h2>About Me</h2>
      <p>
        Passionate AI/ML engineer with expertise in creating state-of-the-art
        models, deploying high-performance inference engines, and applying LLM,
        NLP, CV, RL, etc AIs across diverse fields including astronomy,
        healthcare, quantum system, finance, weather forecast, environmental and
        more.
      </p>
      <div class="skill-tags">
        <span class="skill-tag">AI</span>
        <span class="skill-tag">ML</span>
        <span class="skill-tag">LLM</span>
        <span class="skill-tag">NLP</span>
        <span class="skill-tag">CV</span>
      </div>
    </section>

    <section id="chat" class="section">
      <h2>Chat with Me</h2>
      <div class="chat-container">
        <div class="chat-header">
          <select id="modelSelect" class="model-select">
            <option value="gemma3n:latest">Normal Ho</option>
            <option value="deepseek1.5:latest">Careful Ho</option>
          </select>
          <label
            style="
              margin-left: 1rem;
              display: inline-flex;
              align-items: center;
              gap: 0.5rem;
              cursor: pointer;
            "
          >
            <input type="checkbox" id="showThinkingToggle" />
            Show Thinking Process
          </label>
        </div>
        <div class="chat-messages" id="chatMessages">
          </div>
        <div class="chat-input-container">
          <textarea
            id="promptInput"
            class="chat-input"
            placeholder="Type your message here..."
            rows="1"
          ></textarea>
          <button id="generateButton" class="chat-send-button">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              style="padding-right: 2px; padding-top: 2px"
            >
              <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13" />
            </svg>
          </button>
        </div>
      </div>
    </section>
    <section id="experience" class="section">
      <h2>Experience</h2>
      <div class="experience-container">
        <div class="experience-item visible">
          <h3>Software Engineer - Google</h3>
          <p>2023 - Present</p>
          <div>
            <li>
              Google AI Edge: introduced large language models similar to
              ChatGPT to execute locally on device such as smart phones, and
              allowed highly privacy secured usage and offline capability.
            </li>
            <li>
              Chrome Built-in AI: Implemented and optimized inference engine
              dedicated for on device environment, accelerated the performance
              to match with day-to-day real-world user experience expectation
            </li>
            <li>
              Designed and aligned the inference engine system to state of the
              art AI and ML researches, to incorporate newly published
              techniques in a rapid iteration pace
            </li>
          </div>
        </div>

        <div class="experience-item visible">
          <h3>Software Engineer - MyCareLinq</h3>
          <p>2023 - 2023</p>
          <div>
            <li>
              Integrate human-computer interface systems for health care related
              monitoring.
            </li>
          </div>
        </div>

        <div class="experience-item visible">
          <h3>Software Engineer Intern - Google</h3>
          <p>2022 - 2022</p>
          <div>
            <li>
              Developed TFlite model tensor extractor and metadata writer.
            </li>
            <li>
              Established a comprehensive rule and incorporated into an
              identifier to classify ML model use cases with hierarchy rule
              applying approach which covers 100% of common tasks published in
              task library.
            </li>
            <li>
              Utilized tensor extractor, metadata writer, task identifier along
              with other corresponding tools and integrated a C++ code generator
              which automatically produce C++ and Python inference codes for any
              common TFlite models.
            </li>
          </div>
        </div>

        <div class="experience-divider"></div>

        <div class="experience-item hidden">
          <h3>
            Artificial Intelligence Developer/Researcher/Consultant - Ubiik
          </h3>
          <p>2020 - 2020</p>
          <div>
            <li>
              Collected and analyzed satellite images, extracted patterns and
              physical meaning by machine learning models to predict cloud
              movements.
            </li>
            <li>
              Conducted machine learning models to estimate and predict solar
              panel production rate in any given location in the nation with an
              average accuracy of over 99%.
            </li>
            <li>
              Analyzed the data contribution ratio within the blackbox of DNN
              models, and backtracked the reliability of the source.
            </li>
          </div>
        </div>
        <div class="experience-item hidden">
          <h3>Back-end Developer - Brilltek</h3>
          <p>2019 - 2020</p>
          <div>
            <li>
              Developed back-end systems for monitoring and managing multiple
              factories, including a CNC machining facility in Vietnam and a
              solar power plant in Taiwan.
            </li>
            <li>
              Designed resource flow and worker's SOP to improve performance and
              increase labor safety.
            </li>
            <li>
              Optimized resource distribution and usage priority to keep the
              factory sustainable without supervisory control.
            </li>
          </div>
        </div>

        <div class="experience-item hidden">
          <h3>
            Part time Programmer - Institute of Astronomy, National Central
            University
          </h3>
          <p>2019 - 2020</p>
          <div>
            <li>
              Contributed to astronomical research by developing software tools,
              including a 2D Fourier transform application designed to detect
              near-Earth asteroids.
            </li>
          </div>
        </div>
        <div class="experience-item hidden">
          <h3>Research Assistant - Caltech</h3>
          <p>2018 - 2018</p>
          <div>
            <li>
              Collected and classified transient astronomical events from Zwicky
              Transient Facility data which scan ⅔ of the sky per night.
            </li>
            <li>
              Studied a specific Type IIB Supernova transient event by first
              track and record event progress with P200 telescope, SWIFT
              ultraviolet telescope, and KECK spectrum telescope.
            </li>
            <li>
              Estimated the mass ejection and energy released with models and
              simulations, and investigated two peaks found in Type IIB
              Supernovae.
            </li>
          </div>
        </div>
        <div class="experience-item hidden">
          <h3>Intern Engineer - SilverDome Security</h3>
          <p>2019 - 2020</p>
          <div>
            <li>
              Utilized honeypot to track and record the suspicious emails, login
              attempts, port scanning and attempt of connection, and transferred
              live data into database(Elasticsearch) with hierarchical data
              structure.
            </li>
            <li>
              Analyzed data from Elasticsearch database to determine malicious
              user behavior to protect users from Browse phishing or malicious
              websites, and filtered dangerous hyperlinks in emails by the
              knowledge previously collecte.
            </li>
          </div>
        </div>
        <div class="experience-item hidden">
          <h3>
            Teaching Assistant - National Central University, Department of EE
            and CS
          </h3>
          <p>2016 - 2017</p>
          <div>
            <li>
              Designed problem sets to let students practice C and C++ for
              specific algorithms concepts such as sorting, mapping data
              structures online.
            </li>
            <li>
              Determined the edge cases to examine common programmers' mistakes.
            </li>
            <li>
              Analysed and corrected 50 students' programs, and assisted
              problems that students encounters during laboratory sessions.
            </li>
          </div>
        </div>
        <div class="experience-item hidden">
          <h3>
            Research Assistant - National Central University, Department of EE
            and CS
          </h3>
          <p>2016 - 2016</p>
          <div>
            <li>
              Simulated different network topologies with mininet and virtual
              machines to optimize 5G technology.
            </li>
            <li>
              Established vRouter and vSwitch with SDN approach by ONOS,
              Openflow, mininet and Quagga.
            </li>
          </div>
        </div>

        <button class="show-more-btn" onclick="toggleExperience()">
          <span>Show More Experience</span>
        </button>
      </div>
    </section>

    <section id="education" class="section">
      <h2>Education</h2>
      <div class="experience-item">
        <h3>M.S. in Computer Science</h3>
        <p>University of Southern California</p>
        <p>United State</p>
        <p>Specializations: Artificial Intelligence and Machine Learning</p>
        <p>4.0/4.0</p>
      </div>
      <div class="experience-item">
        <h3>M.S. in Electrical and Computer Engineering</h3>
        <p>University of Waterloo</p>
        <p>Canada</p>
        <p>Focus: Machine Learning and Artificial Intelligence</p>
        <p>3.9/4.0</p>
      </div>
      <div class="experience-item">
        <h3>B.S. in Computer Science</h3>
        <p>National Central University</p>
        <p>Taiwan</p>
        <p>3.8/4.0</p>
      </div>
    </section>

    <section id="projects" class="section">
      <h2>Featured Projects</h2>

      <div class="projects-filter">
        <input
          type="text"
          class="search-bar"
          placeholder="Search projects..."
          id="projectSearch"
        />

        <div class="filter-container">
          <div class="filter-group">
            <label>Technology</label>
            <select class="filter-select" id="techFilter">
              <option value="all">All Technologies</option>
              <option value="Python">Python</option>
              <option value="Java">Java</option>
              <option value="Assembly Language">Assembly Language</option>
              <option value="MATLAB">MATLAB</option>
              <option value="ASM">ASM</option>
              <option value="C++">C++</option>
              <option value="C#">C#</option>
              </select>
          </div>

          <div class="filter-group">
            <label>Category</label>
            <select class="filter-select" id="categoryFilter">
              <option value="all">All Categories</option>
              <option value="Generative AI">Generative AI</option>
              <option value="Computer Vision">Computer Vision</option>
              <option value="Natural Language Processing">
                Natural Language Processing
              </option>
              <option value="Big Data Analysis">Big Data Analysis</option>
            </select>
          </div>

          <div class="filter-group">
            <label>Sort By</label>
            <select class="filter-select" id="sortFilter">
              <option value="newest">Newest First</option>
              <option value="oldest">Oldest First</option>
              <option value="alphabetical">Alphabetical</option>
            </select>
          </div>
        </div>
      </div>

      <div class="projects-grid" id="projectsGrid">
        </div>
    </section>

    <div id="projectModal" class="modal">
      <span class="close-btn" onclick="closeModal()">×</span>
      <div class="modal-content" id="modalContent"></div>
    </div>

    <script>
      // 3D Animation Background
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      const renderer = new THREE.WebGLRenderer({ alpha: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document
        .getElementById("canvas-container")
        .appendChild(renderer.domElement);

      const particles = [];
      const particleCount = 100;

      for (let i = 0; i < particleCount; i++) {
        const geometry = new THREE.SphereGeometry(0.1, 8, 8);
        const material = new THREE.MeshBasicMaterial({
          color: new THREE.Color(Math.random(), Math.random(), 1),
          transparent: true,
          opacity: 0.6,
        });
        const particle = new THREE.Mesh(geometry, material);

        particle.position.x = Math.random() * 40 - 20;
        particle.position.y = Math.random() * 40 - 20;
        particle.position.z = Math.random() * 40 - 20;

        particle.velocity = new THREE.Vector3(
          Math.random() * 0.02 - 0.01,
          Math.random() * 0.02 - 0.01,
          Math.random() * 0.02 - 0.01
        );

        particles.push(particle);
        scene.add(particle);
      }

      camera.position.z = 30;

      // Animation
      function animate() {
        requestAnimationFrame(animate);

        particles.forEach((particle) => {
          particle.position.add(particle.velocity);

          if (particle.position.x > 20 || particle.position.x < -20)
            particle.velocity.x *= -1;
          if (particle.position.y > 20 || particle.position.y < -20)
            particle.velocity.y *= -1;
          if (particle.position.z > 20 || particle.position.z < -20)
            particle.velocity.z *= -1;

          particle.rotation.x += 0.01;
          particle.rotation.y += 0.01;
        });

        renderer.render(scene, camera);
      }
      animate();

      // Scroll Animation
      const sections = document.querySelectorAll(".section");
      const observerOptions = {
        threshold: 0.1,
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      }, observerOptions);

      sections.forEach((section) => {
        observer.observe(section);
      });

      function showProjectDetails(title) {
        const project = projectDetails.find(
          (project) => project.title === title
        );
        const modal = document.getElementById("projectModal");
        const content = document.getElementById("modalContent");

        content.innerHTML = `
                        <h2>${project.title}</h2>
                        <p>${project.description}</p>
                        <h3>Technologies Used</h3>
                        <div class="skill-tags">
                            ${project.technologies
                          .map(
                            (tech) =>
                              `<span class="skill-tag">${tech}</span>`
                          )
                          .join("")}
                        </div>
                        <h3>Challenges</h3>
                        <p>${project.challenges}</p>
                        <h3>Results</h3>
                        <p>${project.results}</p>
                        <h3>Link</h3>
                        <p>${project.link}</p>
                    `;

        modal.style.display = "flex";
      }

      function closeModal() {
        document.getElementById("projectModal").style.display = "none";
      }

      // Close modal when clicking outside
      window.onclick = function (event) {
        const modal = document.getElementById("projectModal");
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };

      // Resize handler
      window.addEventListener("resize", function () {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });

      // Extended project details array
      const projectDetails = [
        {
          title: "Weather, Cloud distribution, Satellite Image Prediction",
          description:
            "Designed and created models for weather forcast related predictions.",
          technologies: [
            "Generative AI",
            "OpenCV",
            "TensorFlow",
            "Keras",
            "Python",
          ],
          category: ["Computer Vision"],
          date: "2020-05",
          challenges: "...",
          results: "...",
          link: "N/A",
        },
        {
          title: "Auto driving car",
          description:
            "Design novel evolutionary algorithm and implemented in auto driving task, result is better than genetic algorithm.",
          technologies: [
            "Genetic Algorithm",
            "Evolutionary Algorithm",
            "Self-Supervised Learning",
            "Teacher-student model",
            "TensorFlow.js",
            "D3.js",
            "JavaScript",
          ],
          category: ["Evolutionary Algorithm"],
          date: "2020-12",
          challenges: "...",
          results: "...",
          link: "https://link.com/woodyhoko/2D-auto-driving-AI",
        },
        {
          title: "Artificial Life",
          description:
            "A number of automated evolving creatures trying to survive in a limited resource environment.",
          technologies: [
            "Genetic Algorithm",
            "Evolutionary Algorithm",
            "Simulation",
            "JavaFX",
            "Java",
          ],
          category: ["Evolutionary Algorithm", "Simulation"],
          date: "2017-05",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/Artificial_Life",
        },
        {
          title: "Tetris AI",
          description:
            "Made a Tetris game in ASM and implemented self learning AI.",
          technologies: [
            "Reinforcement Learning",
            "Structured Learning",
            "Assembly Language",
          ],
          category: ["Reinforcement Learning", "Game"],
          date: "2017-01",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/Tetris_AI",
        },
        {
          title:
            "A Type IIb Supernova from a Very Extended Low-mass Progenitor",
          description:
            "Result of the research in Caltech, SURF program. Published in The Astrophysical Journal Letters, 878:L5 (12pp).",
          technologies: [
            "Big Data Analysis",
            "Physics Modeling",
            "Simulation",
            "Python",
          ],
          category: ["Big Data Analysis", "Simulation"],
          date: "2018-08",
          challenges: "...",
          results: "...",
          link: "https://cv.hoko.xyz/files/IIb.pdf",
        },
        {
          title: "Facial Recognition and Tracking",
          description:
            "Auto detect faces -> determine new or old identity -> label and track in real time.",
          technologies: [
            "Computer Vision",
            "Object Detection",
            "Object Tracking",
            "Facial Recognition",
            "Video Streaming Analysis",
            "PCA",
            "FLDA",
            "ECO",
            "MATLAB",
          ],
          category: ["Computer Vision"],
          date: "2017-12",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/Facial_Recognition_and_Tracking",
        },
        {
          title: "Fall Detection",
          description:
            "Fall detection model that can run on cheap/small IoT cameras to help contact health care for the old population.",
          technologies: [
            "Computer Vision",
            "Supervised Learning",
            "Video Streaming Analysis",
            "TensorFlow",
            "Keras",
            "Python",
          ],
          category: ["Computer Vision"],
          date: "2021-08",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/Fall_Detection",
        },
        {
          title: "Art Creation",
          description:
            "Generate art via self customized mapping techniques and different variations of STYLE-GAN model.",
          technologies: [
            "Generative AI",
            "Text To Image",
            "Style-GAN",
            "TensorFlow",
            "Keras",
            "Python",
          ],
          category: ["Generative AI"],
          date: "2021-08",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/Art_Creation",
        },
        {
          title: "Stock Simulator",
          description:
            "100 fully automated evolved AI trading in a stock simulator.",
          technologies: [
            "Genetic Algorithm",
            "Evolutionary Algorithm",
            "Simulation",
            "Java",
            "Processing 3",
          ],
          category: ["Evolutionary Algorithm", "Simulation"],
          date: "2017-05",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/Stock_Simulator",
        },
        {
          title: "Liver Cancer Prediction",
          description:
            "Genetic sequence/mutation and the corresponding relation to liver cancer by statistical and machine learning model approches. The accuracy rate of determining long survival or short survival after being diagnoise with liver cancer was 75%-80% base on the patient gene.",
          technologies: [
            "Big Data Analysis",
            "Supervised Learning",
            "Tensorflow",
            "Keras",
            "Python",
          ],
          category: ["Big Data Analysis"],
          date: "2019-05",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/liver-cancer-prediction",
        },
        {
          title: "Restaruant Advertisment/Description Integrity Analysis",
          description:
            "Predict how correlated is the restaurant's advertisement/description is. Anaylzed the correspondence of restaurant price/quality, listed properties, comments and reply from yelp data set.",
          technologies: [
            "Big Data Analysis",
            "Supervised Learning",
            "Tensorflow",
            "Keras",
            "Python",
          ],
          category: ["Big Data Analysis"],
          date: "2019-05",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/Restaruant-Advertisment-and-Description-Integrity-Analysis",
        },
        {
          title: "Isaac, Moduler Upgrades in Unity 3D",
          description:
            "Inspired from Isaac game, implemented and designed extendable module upgrades in unity 3D, resulting in players having infinate upgrade combinations.",
          technologies: ["Unity", "Generative Map", "C#"],
          category: ["Game"],
          date: "2019-05",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/Isaac-Moduler-3D-approach",
        },
        {
          title: "Backend and system design for factories",
          description:
            "Designed and implemented safty procedure and progress confirmation system for CNCfactory. Designed and developed multi-level permission access system for multiple companies. Node.js, sql and python are used in this job.",
          technologies: [
            "Database Synchronization",
            "Cyber Security",
            "MySQL",
            "Node.js",
            "JavaScript",
          ],
          category: ["Backend"],
          date: "2020-06",
          challenges: "...",
          results: "...",
          link: "...",
        },
        {
          title: "M(L)ove - Dance move evaluation",
          description:
            "Extract poses from recorded dance video clip, analyze the similarity comparing to the reference video, and calculate the dance score across the song. This is a project for Hack the North.",
          technologies: [
            "Computer Vision",
            "Pose Analysis",
            "Supervised Learning",
            "Video Streaming Analysis",
            "Python",
            "Vanilla JS",
          ],
          category: ["Computer Vision"],
          date: "2021-1",
          challenges: "...",
          results: "...",
          link: "...",
        },
        {
          title: "Movie Genres classification / Chatroom Atmosphere Analysis",
          description:
            "By designing specially crafted hierarchical models and trained till f1 score higher than 90 with over 50000 movies’ subtitles, the model is capable of determining the atmosphere from chat history.",
          technologies: [
            "Natural Language Processing",
            "Natural Language Understanding",
            "Supervised Learning",
            "Python",
          ],
          category: ["Natural Language Processing"],
          date: "2018-06",
          challenges: "...",
          results: "...",
          link: "...",
        },
        {
          title: "Music Auto Generator",
          description:
            "At the year of 2018, Seq-GAN are used to generate music. It is now updated to use PRNN for a more robust and better performance by our team leader.",
          technologies: ["Generative AI", "Seq-GAN", "Python"],
          category: ["Generative AI"],
          date: "2018-05",
          challenges: "...",
          results: "...",
          link: "https://github.com/djosix/Performance-RNN-PyTorch",
        },
        {
          title: "Conversational human computer interfaced",
          description:
            "Explored and implemented Named Entity Recognition, combined available API to achieve conversational control over complex task such as operations for email.",
          technologies: [
            "Natural Language Processing",
            "Name Entity Recognition",
            "Speach to Text",
            "Text to Speach",
            "Elastic Search",
            "Python",
          ],
          category: ["Natural Language Processing"],
          date: "2018-05",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/Conversational-human-computer-interfaced/blob/main/poster.pdf",
        },
        {
          title: "Search Engine for HKUST",
          description:
            "Crawl, label web pages and manage data base(RocksDB / MongoDB) for the web search engine for HKUST.",
          technologies: [
            "Natural Language Processing",
            "RocksDB",
            "MongoDB",
            "Page Rank",
            "Python",
          ],
          category: ["Natural Language Processing"],
          date: "2019-05",
          challenges: "...",
          results: "...",
          link: "https://github.com/webdev-jeff/comp4321-server",
        },
        {
          title: "5 C++ Console UI Games",
          description:
            "My first cpp project as a freshman, a console game collection of 5.",
          technologies: ["C++"],
          category: ["Game"],
          date: "2016-01",
          challenges: "...",
          results: "...",
          link: "https://github.com/woodyhoko/First_Cpp_games",
        },
        {
          title: "Visualize data classification by Neural Networks",
          description: "Neural Networks implementation and visualization.",
          technologies: ["Python"],
          category: ["Game"],
          date: "2017-01",
          challenges: "Big Data Analysis",
          results: "...",
          link: "https://github.com/woodyhoko/Neural_Networks_coursework",
        },
        // Add more projects as needed
      ];

      // Function to render project cards
      function renderProjects(projects) {
        const grid = document.getElementById("projectsGrid");
        const searchTerm = document
          .getElementById("projectSearch")
          .value.toLowerCase();
        grid.innerHTML = "";

        projects.forEach((project, index) => {
          const card = document.createElement("div");
          card.className = "project-card";
          card.onclick = () => showProjectDetails(project.title);

          // Create highlighted versions of text
          const highlightedTitle = highlightText(project.title, searchTerm);
          const highlightedDescription = highlightText(
            project.description,
            searchTerm
          );

          // Add highlight-card class if there's a match
          if (
            searchTerm &&
            (project.title.toLowerCase().includes(searchTerm) ||
              project.description.toLowerCase().includes(searchTerm) ||
              project.technologies.some((tech) =>
                tech.toLowerCase().includes(searchTerm)
              ))
          ) {
            card.classList.add("highlight-card");
          }

          card.innerHTML = `
                    <h3>${highlightedTitle}</h3>
                    <p>${highlightedDescription}</p>
                    <div class="skill-tags">
                      ${project.technologies
                      .map(
                        (tech) =>
                          `<span class="skill-tag">${highlightText(
                            tech,
                            searchTerm
                          )}</span>`
                      )
                      .join("")}
                    </div>
                  `;

          grid.appendChild(card);
        });
      }

      // New function to highlight matching text
      function highlightText(text, searchTerm) {
        if (!searchTerm) return text;

        const regex = new RegExp(`(${escapeRegExp(searchTerm)})`, "gi");
        return text.replace(regex, '<span class="highlight">$1</span>');
      }

      // Helper function to escape special characters in search term
      function escapeRegExp(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      }

      // Updated filterProjects function
      function filterProjects() {
        const searchTerm = document
          .getElementById("projectSearch")
          .value.toLowerCase();
        const techFilter = document.getElementById("techFilter").value;
        const categoryFilter = document.getElementById("categoryFilter").value;
        const sortFilter = document.getElementById("sortFilter").value;

        let filtered = [...projectDetails];

        // Apply filters
        filtered = filtered.filter((project) => {
          const matchesSearch =
            searchTerm === "" ||
            project.title.toLowerCase().includes(searchTerm) ||
            project.description.toLowerCase().includes(searchTerm) ||
            project.technologies.some((tech) =>
              tech.toLowerCase().includes(searchTerm)
            );
          const matchesTech =
            techFilter === "all" || project.technologies.includes(techFilter);
          const matchesCategory =
            categoryFilter === "all" ||
            project.category.includes(categoryFilter);

          return matchesSearch && matchesTech && matchesCategory;
        });

        // Apply sorting
        filtered.sort((a, b) => {
          switch (sortFilter) {
            case "newest":
              return new Date(b.date) - new Date(a.date);
            case "oldest":
              return new Date(a.date) - new Date(b.date);
            case "alphabetical":
              return a.title.localeCompare(b.title);
            default:
              return 0;
          }
        });

        renderProjects(filtered);
      }

      // Event listeners for filters
      document
        .getElementById("projectSearch")
        .addEventListener("input", filterProjects);
      document
        .getElementById("techFilter")
        .addEventListener("change", filterProjects);
      document
        .getElementById("categoryFilter")
        .addEventListener("change", filterProjects);
      document
        .getElementById("sortFilter")
        .addEventListener("change", filterProjects);

      // Initial render
      renderProjects(projectDetails);

      // Add this new function for mobile menu
      function toggleMenu() {
        const menuToggle = document.querySelector(".menu-toggle");
        const navLinks = document.querySelector(".nav-links");
        menuToggle.classList.toggle("active");
        navLinks.classList.toggle("active");

        const logo = document.querySelector(".nav-logo");
        const heroSection = document.querySelector(".hero");
        const scrollY = window.scrollY;
        const heroHeight = heroSection.offsetHeight;
        const scrollProgress = Math.min(0.9, scrollY / heroHeight);

        if (navLinks.classList.contains("active")) {
          let targetX, targetY, scale;
          targetX = window.innerWidth / 2;
          targetY = 32;
          scale = 3;
          logo.style.transition = "transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)";
          logo.style.transform = `translate(-50%, -50%) translate(${targetX}px, ${targetY}px) scale(${
            scale / 4
          })`;
        } else {
          // Initial center position
          const centerX = window.innerWidth / 2;
          const centerY = heroHeight * 0.45;

          // Final corner position
          let cornerX = 80;
          let cornerY = 32;

          // Intermediate top position
          const topX = window.innerWidth / 2;
          let topY = 32;

          if (centerX > 768 / 2) {
            cornerX = centerX - 520;
            cornerY = 26;
            topY = 26;
          }

          let targetX, targetY, scale;

          if (scrollProgress < 0.45) {
            // Direct linear interpolation between center and top
            const t = scrollProgress * (1 / 0.45); // Scale progress to 0-1 range
            targetX = centerX + (topX - centerX) * t;
            targetY = centerY + (topY - centerY) * t;
            if (centerX <= 768 / 2) {
              scale = 4 + (3 - 4) * t;
            } else {
              scale = 4 + (2 - 4) * t;
            }
          } else {
            // Direct linear interpolation between top and corner
            const t = (scrollProgress - 0.45) * (1 / 0.45); // Scale progress to 0-1 range
            targetX = topX + (cornerX - topX) * t;
            targetY = topY;
            // scale = 2 + (1.5 - 2) * t;
            if (centerX <= 768 / 2) {
              scale = 3;
            } else {
              scale = 2;
            }
          }

          logo.style.transition = "transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)";
          logo.style.transform = `translate(-50%, -50%) translate(${targetX}px, ${targetY}px) scale(${
            scale / 4
          })`;
        }
      }

      // Update smoothScroll function to also close mobile menu
      function smoothScroll(elementId) {
        event.preventDefault();
        const element = document.getElementById(elementId);
        const navHeight = document.querySelector(".nav-container").offsetHeight;
        const elementPosition = element.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - navHeight;

        // Close mobile menu if open
        const menuToggle = document.querySelector(".menu-toggle");
        const navLinks = document.querySelector(".nav-links");
        if (navLinks.classList.contains("active")) {
          menuToggle.classList.remove("active");
          navLinks.classList.remove("active");
        }

        window.scrollTo({
          top: offsetPosition,
          behavior: "smooth",
        });
      }

      const scrollIndicator = document.querySelector(".scroll-indicator");
      let isAnimating = false;

      function startBounce() {
        if (!isAnimating) {
          isAnimating = true;
          scrollIndicator.classList.add("bouncing");
        }
      }

      function resetBounce() {
        scrollIndicator.classList.remove("bouncing");
        isAnimating = false;
        // If still hovering, start the next bounce
        if (scrollIndicator.matches(":hover")) {
          void scrollIndicator.offsetWidth;
          // Small delay to ensure CSS recognizes the class change
          requestAnimationFrame(() => {
            startBounce();
          });
        }
      }

      // Start bounce on hover
      scrollIndicator.addEventListener("mouseenter", startBounce);

      // Handle animation end
      scrollIndicator.addEventListener("animationend", resetBounce);

      // Updated typing text CSS
      const styleSheet = document.createElement("style");
      // styleSheet.textContent = `
      //  .typing-text span.shuffling {
      //      color: rgba(0, 255, 136, 0.3);
      //      text-shadow: 0 0 5px rgba(0, 255, 136, 0.2);
      //      transition: all 0.3s ease;
      //    }

      //  .typing-text span.static {
      //      color: #00ff88;
      //      text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
      //      transition: all 0.3s ease;
      //    }
      // `;
      document.head.appendChild(styleSheet);

      // Updated Matrix typing animation script
      const phrases = [
        "AI/ML Software Engineer",
        "A non-AI working on AI",
        "AI enthusiast",
      ];

      const characters =
        "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*";
      const typingText = document.getElementById("typing-text");
      let currentPhraseIndex = 0;
      let nextPhraseIndex = 1;
      let phase = "display";
      let charIndex = 0;
      let shuffleCount = 0;
      let textContent = "";

      function getRandomChar() {
        return characters.charAt(Math.floor(Math.random() * characters.length));
      }

      function updateText() {
        const currentPhrase = phrases[currentPhraseIndex];
        const nextPhrase = phrases[nextPhraseIndex];
        let displayText = "";

        switch (phase) {
          case "display":
            if (charIndex < currentPhrase.length) {
              // Building up the phrase
              for (let i = 0; i < charIndex; i++) {
                if (currentPhrase[i] != " ") {
                  displayText += `<span class="static">${currentPhrase[i]}</span>`;
                } else {
                  displayText += `<span class="static">&nbsp</span>`;
                }
              }
              for (let i = charIndex; i < currentPhrase.length; i++) {
                displayText += `<span class="shuffling">${getRandomChar()}</span>`;
              }

              shuffleCount++;
              if (shuffleCount > 2) {
                shuffleCount = 0;
                charIndex++;
              }
              setTimeout(updateText, 40);
            } else {
              // Phrase fully displayed
              displayText = currentPhrase
                .split("")
                .map(
                  (char) =>
                    `<span class="static">${
                      char === " " ? "&nbsp;" : char
                    }</span>`
                )
                .join("");
              setTimeout(() => {
                phase = "shuffle";
                charIndex = currentPhrase.length - 1;
                shuffleCount = 0;
                updateText();
              }, 2000);

              setTimeout(startBounce, 1200);
            }
            break;

          case "shuffle":
            for (let i = 0; i < charIndex; i++) {
              if (currentPhrase[i] != " ") {
                displayText += `<span class="static">${currentPhrase[i]}</span>`;
              } else {
                displayText += `<span class="static">&nbsp</span>`;
              }
            }
            for (let i = charIndex; i < currentPhrase.length; i++) {
              displayText += `<span class="shuffling">${getRandomChar()}</span>`;
            }

            shuffleCount++;
            if (shuffleCount > 1) {
              shuffleCount = 0;
              charIndex--;
            }

            if (charIndex < 0) {
              phase = "transition";
              charIndex = currentPhrase.length;
              shuffleCount = 0;
              // Remove the delay here, immediately continue to next update
              updateText();
            } else {
              setTimeout(updateText, 40);
            }
            break;

          case "transition":
            const targetLength = nextPhrase.length;
            const currentLength = charIndex;

            // All characters are shuffling during transition
            if (currentLength < targetLength) {
              for (let i = 0; i < currentLength; i++) {
                displayText += `<span class="shuffling">${getRandomChar()}</span>`;
              }
              if (currentLength < targetLength) {
                displayText += `<span class="shuffling">${getRandomChar()}</span>`;
              }
              shuffleCount++;
              if (shuffleCount > 5) {
                shuffleCount = 0;
                charIndex++;
              }
              setTimeout(updateText, 40);
            } else if (currentLength > targetLength) {
              for (let i = 0; i < currentLength; i++) {
                displayText += `<span class="shuffling">${getRandomChar()}</span>`;
              }
              shuffleCount++;
              if (shuffleCount > 3) {
                shuffleCount = 0;
                charIndex--;
              }
              setTimeout(updateText, 40);
            } else {
              // Instead of immediately switching to display phase,
              // render one more frame of shuffling characters
              for (let i = 0; i < targetLength; i++) {
                displayText += `<span class="shuffling">${getRandomChar()}</span>`;
              }
              currentPhraseIndex = nextPhraseIndex;
              nextPhraseIndex = (nextPhraseIndex + 1) % phrases.length;
              phase = "display";
              charIndex = 0;
              shuffleCount = 0;
              // Continue immediately to the next frame
              setTimeout(updateText, 40);
            }
            break;
        }

        // Only update the DOM if we have content to display
        if (displayText) {
          typingText.innerHTML = displayText;
        }
      }

      // Add continuous shuffle effect
      setInterval(() => {
        if (phase === "transition" || phase === "shuffle") {
          const spans = typingText.querySelectorAll("span.shuffling");
          spans.forEach((span) => {
            span.textContent = getRandomChar();
          });
        }
      }, 50);

      // Start the typing animation
      setTimeout(updateText, 1000);

      document.addEventListener("DOMContentLoaded", () => {
        const logo = document.querySelector(".nav-logo");
        const heroSection = document.querySelector(".hero");

        function updateLogoPosition() {
          const scrollY = window.scrollY;
          const heroHeight = heroSection.offsetHeight;
          const scrollProgress = Math.min(0.9, scrollY / heroHeight);

          // Initial center position
          const centerX = window.innerWidth / 2;
          const centerY = heroHeight * 0.45;

          // Final corner position
          let cornerX = 80;
          let cornerY = 32;

          // Intermediate top position
          const topX = window.innerWidth / 2;
          let topY = 32;

          if (centerX > 768 / 2) {
            cornerX = centerX - 520;
            cornerY = 26;
            topY = 26;
          }

          let targetX, targetY, scale;

          if (scrollProgress < 0.45) {
            // Direct linear interpolation between center and top
            const t = scrollProgress * (1 / 0.45); // Scale progress to 0-1 range
            targetX = centerX + (topX - centerX) * t;
            targetY = centerY + (topY - centerY) * t;
            if (centerX <= 768 / 2) {
              scale = 4 + (3 - 4) * t;
            } else {
              scale = 4 + (2 - 4) * t;
            }
          } else {
            // Direct linear interpolation between top and corner
            const t = (scrollProgress - 0.45) * (1 / 0.45); // Scale progress to 0-1 range
            targetX = topX + (cornerX - topX) * t;
            targetY = topY;
            // scale = 2 + (1.5 - 2) * t;
            if (centerX <= 768 / 2) {
              scale = 3;
            } else {
              scale = 2;
            }
          }

          // Direct application of transforms without any easing or smoothing
          logo.style.transition = "";
          logo.style.transform = `translate(-50%, -50%) translate(${targetX}px, ${targetY}px) scale(${
            scale / 4
          })`;

          // Direct opacity calculation
          const opacity = scrollProgress < 0.1 ? 0 : 1;
          logo.style.opacity = opacity;
        }

        // Use direct scroll handler without requestAnimationFrame
        window.addEventListener("scroll", updateLogoPosition, {
          passive: true,
        });

        // Handle resize events directly
        window.addEventListener("resize", updateLogoPosition, {
          passive: true,
        });

        // Initial position
        updateLogoPosition();
      });

      const chatMessages = document.getElementById("chatMessages");
      const promptInput = document.getElementById("promptInput");
      const generateButton = document.getElementById("generateButton");
      const modelSelect = document.getElementById("modelSelect");
      const chatHistory = [];

      function addMessage(content, role) {
        const messageDiv = document.createElement("div");
        messageDiv.className = `chat-message ${role}`;
        messageDiv.textContent = content;
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        return messageDiv;
      }

      function createTypingIndicator() {
        const indicator = document.createElement("div");
        indicator.className = "typing-indicator";
        indicator.innerHTML = "<span></span><span></span><span></span>";
        return indicator;
      }

      async function generateText(prompt, model) {
        addMessage(prompt, "user");
        const assistantDiv = document.createElement("div");
        assistantDiv.className = "chat-message assistant";

        const contentContainer = document.createElement("span");
        const typingIndicator = createTypingIndicator();
        assistantDiv.appendChild(contentContainer);
        assistantDiv.appendChild(typingIndicator);

        generateButton.disabled = true;
        chatHistory.push({ role: "user", content: prompt });

        chatMessages.appendChild(assistantDiv);

        try {
          const response = await fetch("https://llmapi.hoko.xyz/generate", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "text/event-stream",
            },
            mode: "cors",
            body: JSON.stringify({ messages: chatHistory, model }),
          });

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          let fullResponse = "";
          let finalMetadata = null;
          const reader = response.body.getReader();
          let buffer = "";

          while (true) {
            const { value, done } = await reader.read();
            if (done) break;

            buffer += new TextDecoder().decode(value);
            const lines = buffer.split("\n");
            buffer = lines.pop() || "";

            for (const line of lines) {
              if (line.startsWith("data: ")) {
                try {
                  const data = JSON.parse(line.substring(6));

                  if (data.message && data.message.content) {
                    fullResponse += data.message.content;
                    contentContainer.textContent = fullResponse;
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                  }

                  if (data.done) {
                    finalMetadata = data;
                  }
                } catch (error) {
                  console.error("Error parsing JSON:", error);
                }
              }
            }
          }

          chatHistory.push({ role: "assistant", content: fullResponse });
          if (typingIndicator) typingIndicator.remove();

          const showThinkingToggle =
            document.getElementById("showThinkingToggle");
          if (showThinkingToggle.checked && finalMetadata) {
            const thinkingDiv = document.createElement("div");
            thinkingDiv.className = "chat-message thinking-process";

            const title = document.createElement("strong");
            title.textContent = "Thinking Process (Final Stats)";
            thinkingDiv.appendChild(title);

            const pre = document.createElement("pre");
            const { context, ...displayMetadata } = finalMetadata;
            pre.textContent = JSON.stringify(displayMetadata, null, 2);
            thinkingDiv.appendChild(pre);

            chatMessages.appendChild(thinkingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
          }
        } catch (error) {
          console.error("Fetch error:", error);
          if (typingIndicator) typingIndicator.remove();
          assistantDiv.remove();
          addMessage(
            "Sorry, there was an error processing your request.",
            "assistant"
          );
        } finally {
          generateButton.disabled = false;
        }
      }

      promptInput.addEventListener("input", function () {
        this.style.height = "auto";
        this.style.height = this.scrollHeight + "px";
      });

      generateButton.addEventListener("click", () => {
        const prompt = promptInput.value.trim();
        if (prompt) {
          generateText(prompt, modelSelect.value);
          promptInput.value = "";
          promptInput.style.height = "auto";
        }
      });

      promptInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          generateButton.click();
        }
      });

      setTimeout(() => {
        addMessage(
          "Hi! I'm Ho's AI assistant. How can I help you today?",
          "assistant"
        );
      }, 1000);

      const hiddenItems = document.querySelectorAll(".experience-item.hidden");
      function toggleExperience() {
        const btn = document.querySelector(".show-more-btn");
        const divider = document.querySelector(".experience-divider");

        if (btn.querySelector("span").textContent === "Show More Experience") {
          divider.classList.add("visible");
          hiddenItems.forEach((item, index) => {
            item.classList.remove("hidden");
            setTimeout(() => {
              item.classList.add("visible");
            }, index * 100);
          });
          btn.querySelector("span").textContent = "Show Less";
        } else {
          console.log(hiddenItems);
          hiddenItems.forEach((item) => {
            console.log(item);
            item.classList.remove("visible");
            setTimeout(() => {
              item.classList.add("hidden");
            }, 500);
          });
          divider.classList.remove("visible");
          btn.querySelector("span").textContent = "Show More Experience";

          const lastVisibleItem = document.querySelector(
            ".experience-item:not(.hidden)"
          );
          if (lastVisibleItem) {
            lastVisibleItem.scrollIntoView({
              behavior: "smooth",
              block: "nearest",
            });
          }
        }
      }

      const observer2 = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
            }
          });
        },
        { threshold: 0.1 }
      );

      document
        .querySelectorAll(".experience-item:not(.hidden)")
        .forEach((item) => {
          observer2.observe(item);
        });
    </script>
  </body>
</html>
